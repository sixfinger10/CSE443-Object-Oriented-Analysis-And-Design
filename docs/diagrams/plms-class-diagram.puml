@startuml
!theme plain
hide empty methods
skinparam classAttributeIconSize 0

package "com.visionsoft.plms.entity" {
    abstract class LibraryItem {
        + Long id
        + String title
        + String description
        + String imageUrl
        + ItemType type
        + ItemStatus status
        + Double rating
        + Boolean favorite
        + Date dateAdded
    }

    class Book {
        + String author
        + String isbn
        + String publisher
        + Integer pageCount
    }

    class Movie {
        + String director
        + Integer durationMinutes
        + String imdbId
        + Double imdbScore
    }

    class TVSeries {
        + String creator
        + Integer seasonCount
        + String network
        + String imdbId
    }

    class Music {
        + String artist
        + String album
        + String mbid
        + Integer durationSeconds
    }

    class User {
        + Long id
        + String username
        + String email
        + String password
        + LocalDateTime createdAt
    }

    class MediaList {
        + Long id
        + String name
        + LocalDateTime createdAt
    }

    class MediaListItem {
        + Long id
        + Integer itemOrder
        + LocalDateTime addedAt
    }

    class PasswordResetToken {
        + Long id
        + String email
        + String resetCode
        + LocalDateTime expiresAt
        + Boolean isUsed
    }

    ' İlişkiler (Inheritance)
    LibraryItem <|-- Book
    LibraryItem <|-- Movie
    LibraryItem <|-- TVSeries
    LibraryItem <|-- Music

    ' İlişkiler (Associations)
    User "1" *-- "*" LibraryItem : owns >
    User "1" *-- "*" MediaList : creates >
    MediaList "1" *-- "*" MediaListItem : contains >
    MediaListItem "*" --> "1" LibraryItem : references >
    User "1" -- "*" PasswordResetToken : has >
}

package "com.visionsoft.plms.dto" {
    class LibraryItemDTO {
        + Long id
        + String title
        + ItemType type
        + (all fields flattened)
    }
}

package "com.visionsoft.plms.controller" {
    class AuthController
    class LibraryController
    class DashboardController
    class BookController
    class MovieController
    class MusicController
    class TVSeriesController
}

package "com.visionsoft.plms.service" {
    class AuthService
    class EmailService
    class ImportExportService
    class BookService
    class MovieService
}

package "com.visionsoft.plms.repository" {
    interface UserRepository
    interface LibraryItemRepository
    interface PasswordResetTokenRepository
    interface BookRepository
}

' Service Relationships
AuthController --> AuthService
AuthService --> UserRepository
AuthService --> PasswordResetTokenRepository
AuthService --> EmailService : sends emails via >

LibraryController --> ImportExportService
ImportExportService ..> LibraryItemDTO : uses >
ImportExportService --> LibraryItemRepository : reads/writes >

BookController --> BookService
BookService --> BookRepository

DashboardController --> LibraryItemRepository : counts items >

@enduml